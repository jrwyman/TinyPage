(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n(0),o=n.n(s),a=n(22),c=n.n(a),i=n(24),u=n(17),l=n.n(u),d=function(e){e?l.a.defaults.headers.common.Authorization=e:delete l.a.defaults.headers.common.Authorization},p="RECEIVE_USER_SIGN_IN",j="RECEIVE_SESSION_ERRORS",b="RECEIVE_USER_LOGOUT",h="RECEIVE_USER_SIGN_UP",f=function(e){return{type:j,errors:e}},O=function(e){return function(t){return(n=e,l.a.post("/users/register",n)).then((function(){return t({type:h})}),(function(e){return t(f(e.response.data))}));var n}},v=function(e){return function(t){return(n=e,l.a.post("/users/login",n)).then((function(e){var n=e.data.token;localStorage.setItem("jwtToken",n),d(n);var r=Object(i.a)(n);t({type:p,currentUser:r})})).catch((function(e){t(f(e.response.data))}));var n}},m=function(){return function(e){localStorage.removeItem("jwtToken"),d(!1),e({type:b})}},x=n(18),g=n(39),y=n(40),E=n.n(y),w=n(5),S={isAuthenticated:!1,user:{},errors:[]},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(w.a)(Object(w.a)({},e),{},{isAuthenticated:!!t.currentUser,user:t.currentUser});case b:return Object(w.a)(Object(w.a)({},e),{},{isAuthenticated:!1,user:void 0});case h:return Object(w.a)({},e);case j:return Object(w.a)(Object(w.a)({},e),{},{errors:t.errors});default:return e}},P="RECEIVE_POSTS",C="RECEIVE_NEW_POST",N="RECEIVE_USER_POSTS",U="RECEIVE_POST_ERRORS",I=function(e){return{type:U,errors:e}},_=function(){return function(e){return l.a.get("/posts").then((function(t){return e(function(e){return{type:P,posts:e}}(t))})).catch((function(t){return e(I(t.response.data))}))}},R=function(e){return function(t){return function(e){return l.a.get("/posts/user/".concat(e))}(e).then((function(e){return t(function(e){return{type:N,posts:e}}(e))})).catch((function(e){return t(I(e.response.data))}))}},T=function(e){return function(t){return function(e){return l.a.post("/posts/",e)}(e).then((function(e){return t(function(e){return{type:C,post:e}}(e))})).catch((function(e){return t(I(e.response.data))}))}},L={all:{},user:{},new:void 0,errors:[]},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;Object.freeze(e);var n=Object(w.a)({},e);switch(t.type){case P:return n.all=t.posts.data,n;case N:return n.user=t.posts.data,n;case C:return n.new=t.post.data,n;case U:return Object(w.a)(Object(w.a)({},e),{},{errors:t.errors});default:return e}},V=Object(x.c)({session:k,posts:D}),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(x.d)(V,e,Object(x.a)(g.a,E.a))},G=n(4),z=n(11),M=n(3),F=n(42),J=function(e){return{loggedIn:e.session.isAuthenticated}},W=Object(M.g)(Object(G.b)(J)((function(e){var t=e.component,n=e.path,s=e.loggedIn,o=e.exact;return Object(r.jsx)(M.b,{path:n,exact:o,render:function(e){return s?Object(r.jsx)(M.a,{to:"/feed"}):Object(r.jsx)(t,Object(w.a)({},e))}})}))),B=Object(M.g)(Object(G.b)(J)((function(e){var t=e.component,n=e.loggedIn,s=Object(F.a)(e,["component","loggedIn"]);return Object(r.jsx)(M.b,Object(w.a)(Object(w.a)({},s),{},{render:function(e){return n?Object(r.jsx)(t,Object(w.a)({},e)):Object(r.jsx)(M.a,{to:"/login"})}}))}))),Y=n(12),q=n(13),H=n(8),K=n(15),Q=n(14),X=n.p+"static/media/TinyPage.08ef7619.png",Z=(n(70),function(e){Object(K.a)(n,e);var t=Object(Q.a)(n);function n(e){var r;return Object(Y.a)(this,n),(r=t.call(this,e)).logoutUser=r.logoutUser.bind(Object(H.a)(r)),r.getLinks=r.getLinks.bind(Object(H.a)(r)),r}return Object(q.a)(n,[{key:"getLinks",value:function(){return this.props.loggedIn?Object(r.jsxs)("div",{className:"nav-links",children:[Object(r.jsx)("button",{type:"submit",onClick:this.logoutUser,children:"Logout"}),Object(r.jsx)(z.b,{to:"/feed",children:"Feed"}),Object(r.jsx)(z.b,{to:"/profile",children:"Profile"})]}):Object(r.jsxs)("div",{className:"nav-links",children:[Object(r.jsx)(z.b,{to:"/signup",children:"Signup"}),Object(r.jsx)(z.b,{to:"/login",children:"Login"})]})}},{key:"logoutUser",value:function(e){var t=this.props.logout;e.preventDefault(),t()}},{key:"render",value:function(){return Object(r.jsxs)("div",{className:"navbar",children:[n.renderLogo(),this.getLinks()]})}}],[{key:"renderLogo",value:function(){return Object(r.jsx)("img",{className:"logo",src:X,alt:"logo",width:"100px"})}}]),n}(o.a.Component)),$=Object(G.b)((function(e){return{loggedIn:e.session.isAuthenticated}}),{logout:m})(Z),ee=(n(71),function(e){Object(K.a)(n,e);var t=Object(Q.a)(n);function n(e){var r;return Object(Y.a)(this,n),(r=t.call(this,e)).state={text:""},r.handleSubmit=r.handleSubmit.bind(Object(H.a)(r)),r.renderErrors=r.renderErrors.bind(Object(H.a)(r)),r}return Object(q.a)(n,[{key:"handleSubmit",value:function(e){var t=this.state.text,n=this.props.composePost;e.preventDefault(),n({text:t}),this.setState({text:""})}},{key:"update",value:function(){var e=this;return function(t){return e.setState({text:t.currentTarget.value})}}},{key:"renderErrors",value:function(){var e=this.props.errors;return e?Object(r.jsx)("ul",{children:Object.keys(e).map((function(t){return Object(r.jsx)("li",{children:e[t]},"error-".concat(t))}))}):null}},{key:"render",value:function(){var e=this.state.text;return Object(r.jsx)("div",{className:"post-compose-card",children:Object(r.jsx)("form",{onSubmit:this.handleSubmit,children:Object(r.jsxs)("div",{className:"post-compose-form",children:[Object(r.jsx)("h3",{children:"Create Post"}),Object(r.jsx)("textarea",{value:e,onChange:this.update(),placeholder:"Write your post...",className:"post-compose-text"}),Object(r.jsx)("input",{type:"submit",value:"Post",className:"post-compose-submit"}),this.renderErrors()]})})})}}]),n}(o.a.Component)),te=Object(G.b)((function(e){return{currentUser:e.session.user,newPost:e.posts.new,errors:e.posts.errors}}),(function(e){return{composePost:function(t){return e(T(t))}}}))(ee),ne=(n(72),function(e){Object(K.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(Y.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.fetchUserPosts)(e.currentUser.id)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.newPost,r=t.fetchUserPosts,s=t.currentUser;n!==e.newPost&&r(s.id)}},{key:"render",value:function(){var e=this.props,t=e.posts,n=e.currentUser;return 0===t.length?Object(r.jsx)("div",{children:"This user has no Posts"}):Object(r.jsxs)("div",{className:"profile-card",children:[Object(r.jsx)("h1",{className:"profile-header",children:n.username}),Object(r.jsx)(te,{}),Object(r.jsx)("div",{className:"profile-posts",children:t.map((function(e){return Object(r.jsx)("div",{className:"profile-post",children:Object(r.jsx)("p",{className:"profile-post-text",children:e.text})},e._id)}))})]})}}]),n}(o.a.Component));ne.defaultProps={newPost:void 0};var re=ne,se=Object(G.b)((function(e){return{posts:Object.values(e.posts.user),newPost:e.posts.new,currentUser:e.session.user}}),(function(e){return{fetchUserPosts:function(t){return e(R(t))}}}))(re),oe=n(20),ae=function(e){Object(K.a)(n,e);var t=Object(Q.a)(n);function n(e){var r;return Object(Y.a)(this,n),(r=t.call(this,e)).state={email:"",password:""},r.handleSubmit=r.handleSubmit.bind(Object(H.a)(r)),r.renderErrors=r.renderErrors.bind(Object(H.a)(r)),r}return Object(q.a)(n,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,n=t.email,r=t.password;(0,this.props.login)({email:n,password:r})}},{key:"update",value:function(e){var t=this;return function(n){return t.setState(Object(oe.a)({},e,n.currentTarget.value))}}},{key:"renderErrors",value:function(){var e=this.props.errors;return e?Object(r.jsx)("ul",{children:Object.keys(e).map((function(t){return Object(r.jsx)("li",{children:e[t]},"error-".concat(t))}))}):null}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return Object(r.jsx)("div",{className:"login-form-container",children:Object(r.jsx)("form",{onSubmit:this.handleSubmit,children:Object(r.jsxs)("div",{className:"login-form",children:[Object(r.jsx)("input",{type:"text",value:t,onChange:this.update("email"),placeholder:"Email",autoComplete:"on"}),Object(r.jsx)("input",{type:"password",value:n,onChange:this.update("password"),placeholder:"Password",autoComplete:"on"}),Object(r.jsx)("input",{className:"login-submit",type:"submit",value:"Log In"}),this.renderErrors()]})})})}}]),n}(o.a.Component);ae.defaultProps={errors:void 0};var ce=Object(M.g)(ae),ie=Object(G.b)((function(e){return{currentUser:e.session.user,errors:e.session.errors}}),(function(e){return{login:function(t){return e(v(t))}}}))(ce),ue=(n(73),function(e){Object(K.a)(n,e);var t=Object(Q.a)(n);function n(e){var r;return Object(Y.a)(this,n),(r=t.call(this,e)).state={email:"",username:"",password:"",password2:""},r.handleSubmit=r.handleSubmit.bind(Object(H.a)(r)),r.clearedErrors=!1,r}return Object(q.a)(n,[{key:"handleSubmit",value:function(e){var t=this.state,n=t.email,r=t.username,s=t.password,o=t.password2,a=this.props,c=a.history,i=a.signup;e.preventDefault(),i({email:n,username:r,password:s,password2:o},c).then((function(e){"RECEIVE_USER_SIGN_UP"===e.type&&c.push("/login")}))}},{key:"update",value:function(e){var t=this;return function(n){return t.setState(Object(oe.a)({},e,n.currentTarget.value))}}},{key:"renderErrors",value:function(){var e=this.props.errors;return e?Object(r.jsx)("ul",{children:Object.keys(e).map((function(t){return Object(r.jsx)("li",{children:e[t]},"error-".concat(t))}))}):null}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.username,s=e.password,o=e.password2;return Object(r.jsx)("div",{className:"signup-form-container",children:Object(r.jsx)("form",{onSubmit:this.handleSubmit,children:Object(r.jsxs)("div",{className:"signup-form",children:[Object(r.jsx)("input",{type:"text",value:t,onChange:this.update("email"),placeholder:"Email",autoComplete:"on"}),Object(r.jsx)("input",{type:"text",value:n,onChange:this.update("username"),placeholder:"Username",autoComplete:"on"}),Object(r.jsx)("input",{type:"password",value:s,onChange:this.update("password"),placeholder:"Password",autoComplete:"on"}),Object(r.jsx)("input",{type:"password",value:o,onChange:this.update("password2"),placeholder:"Confirm Password",autoComplete:"on"}),Object(r.jsx)("input",{className:"signup-submit",type:"submit",value:"Sign Up"}),this.renderErrors()]})})})}}]),n}(o.a.Component));ue.defaultProps={errors:void 0};var le=Object(M.g)(ue),de=Object(G.b)((function(e){return{errors:e.session.errors}}),(function(e){return{signup:function(t){return e(O(t))}}}))(le),pe=(n(74),function(e){Object(K.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(Y.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.fetchPosts)()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.newPost,r=t.fetchPosts;n!==e.newPost&&r()}},{key:"render",value:function(){var e=this.props.posts;return 0===e.length?Object(r.jsx)("div",{children:"There are no Posts"}):Object(r.jsxs)("div",{className:"feed-card",children:[Object(r.jsx)("h2",{children:"Your Feed"}),Object(r.jsx)(te,{}),Object(r.jsx)("div",{className:"feed-posts",children:e.map((function(e){return Object(r.jsxs)("div",{className:"feed-post",children:[Object(r.jsx)("h3",{children:e.user.username}),Object(r.jsx)("p",{className:"feed-post-text",children:e.text})]},e._id)}))})]})}}]),n}(o.a.Component));pe.defaultProps={newPost:void 0};var je=Object(M.g)(pe),be=Object(G.b)((function(e){return{posts:Object.values(e.posts.all),currentUser:e.session.user,newPost:e.posts.new,errors:e.session.errors}}),(function(e){return{fetchPosts:function(){return e(_())}}}))(je),he=(n(75),function(){return Object(r.jsxs)("div",{className:"app",children:[Object(r.jsx)($,{}),Object(r.jsxs)(M.d,{children:[Object(r.jsx)(W,{exact:!0,path:"/login",component:ie}),Object(r.jsx)(W,{exact:!0,path:"/signup",component:de}),Object(r.jsx)(B,{exact:!0,path:"/profile",component:se}),Object(r.jsx)(B,{exact:!0,path:"/feed",component:be})]})]})}),fe=function(e){var t=e.store;return Object(r.jsx)(G.a,{store:t,children:Object(r.jsx)(z.a,{children:Object(r.jsx)(he,{})})})};document.addEventListener("DOMContentLoaded",(function(){var e;if(localStorage.jwtToken){d(localStorage.jwtToken);var t=Object(i.a)(localStorage.jwtToken);e=A({session:{isAuthenticated:!0,user:t}});var n=Date.now()/1e3;t.exp<n&&(e.dispatch(m()),window.location.href="/login")}else e=A({});var s=document.getElementById("root");c.a.render(Object(r.jsx)(fe,{store:e}),s)}))}},[[76,1,2]]]);
//# sourceMappingURL=main.0e173ebf.chunk.js.map